<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>p5play</title>
    <style>
        canvas {
            border: 1px solid #aaa;
        }
    </style>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.4/lib/p5.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.4/lib/addons/p5.sound.min.js"></script>
    <!-- planck -->
    <script src="https://cdn.jsdelivr.net/npm/planck@latest/dist/planck.min.js"></script>
    <!-- Version 3 of p5.play -->
    <script src="https://p5play.org/v3/p5play.js"></script>
    <script>
        let player, floor;
        let enemies;
        let isGameOver = false;

        let playerImg;
        let enemyImages = []; // Array to store multiple enemy images

        function preload() {
            playerImg = loadImage('player.svg');
            enemyImages[0] = loadImage('enemy.svg');
            enemyImages[1] = loadImage('devil.svg');
            enemyImages[2] = loadImage('monster.svg');
            // Add more as needed
        }

        function setup() {
            createCanvas(640, 480);
            world.gravity.y = 10;

            player = new Sprite(100, 350);
            player.image = playerImg;
            player.rotationLock = false;
            player.scale = 0.1;
            player.collider = 'dynamic';
            player.w = playerImg.width * player.scale;
            player.h = playerImg.height * player.scale;

            floor = new Sprite(320, 400, 500, 30);
            floor.color = '#666';
            floor.collider = 'static';

            enemies = new Group();
            enemies.collider = 'kinetic';
            enemies.scale = 0.1;
        }

        function draw() {
            background(255);

            if (isGameOver) {
                fill(0);
                textSize(50);
                textAlign(CENTER);
                text('GAME OVER', width / 2, height / 2);
                return;
            }

            if (kb.pressing('right')) {
                player.vel.x = 5;
            } else if (kb.pressing('left')) {
                player.vel.x = -5;
            } else {
                player.vel.x = 0;
            }

            if (kb.presses('up') && player.colliding(floor)) {
                player.vel.y = -5;
            }

            if (frameCount % 120 === 0) {
                let enemy = new enemies.Sprite(width, 380);
                let randomImage = random(enemyImages); // Pick random enemy image
                enemy.image = randomImage;
                enemy.vel.x = -3;
            }

            enemies.cull(100);

            if (player.colliding(enemies)) {
                isGameOver = true;
                player.tint = '#666';
            }
        }
    </script>
</body>

</html>